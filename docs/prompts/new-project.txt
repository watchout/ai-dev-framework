以下の手順でこのプロジェクトにAI開発フレームワークをセットアップして、開発を開始して。

■ Step 1: フレームワーク取得
git clone --depth 1 https://github.com/watchout/ai-dev-framework.git /tmp/ai-dev-framework

■ Step 2: ディレクトリ作成
以下のディレクトリを作成:
docs/idea/
docs/requirements/
docs/design/core/
docs/design/features/common/
docs/design/features/project/
docs/design/adr/
docs/standards/
docs/operations/
docs/marketing/
docs/growth/
docs/management/
docs/notes/
docs/checklists/
docs/ssot/
docs/traceability/
src/
.claude/agents/
.claude/hooks/
.claude/skills/
.framework/

■ Step 3: 標準ドキュメントをコピー
/tmp/ai-dev-framework/templates/ の中身を docs/standards/ にコピー（.git, .DS_Store, ci/, profiles/, project/, skills/ は除外）

■ Step 4: CLAUDE.md を生成
以下の内容でプロジェクトルートに CLAUDE.md を作成（プロジェクト名と説明はディレクトリ名と package.json から推測して適宜埋める）:

---CLAUDE.md ここから---
# CLAUDE.md - Project Instructions (for Claude Code)

> Claude Code reads this file automatically.
> All specifications are in docs/.

---

## AI Interruption Protocol (Highest Priority Rule)

Stop immediately and ask the user in these cases:

1. A specification decision is needed but not in SSOT
2. SSOT wording is ambiguous with multiple interpretations
3. Multiple valid technical approaches exist
4. Contradiction between SSOT and existing implementation
5. Coding standards do not cover the current case
6. Impact scope of a change is unclear
7. A business decision is required

"Guessing" and "just use a placeholder" are PROHIBITED.

## Project Overview

| Item | Value |
|------|-------|
| Product | {{PROJECT_NAME}} |
| Description | {{DESCRIPTION}} |
| Created | {{TODAY}} |

---

## Specification Reference

### Before implementation, always check (in order):

1. Feature specs       -> docs/design/features/
2. Core definitions    -> docs/design/core/
   - UI/State          -> docs/design/core/SSOT-2_UI_STATE.md
   - API rules         -> docs/design/core/SSOT-3_API_CONTRACT.md
   - Data model        -> docs/design/core/SSOT-4_DATA_MODEL.md
   - Cross-cutting     -> docs/design/core/SSOT-5_CROSS_CUTTING.md
3. Dev standards       -> docs/standards/
4. PRD                 -> docs/requirements/SSOT-0_PRD.md

## Directory Structure

docs/
├── idea/             <- Idea validation
├── requirements/     <- PRD, Feature Catalog
├── design/           <- Core + Features + ADR
├── standards/        <- Dev standards (framework templates)
├── operations/       <- Operations
├── marketing/        <- Marketing
├── growth/           <- Growth
└── management/       <- Project management

## Coding Standards

- Components: PascalCase (LoginForm.tsx)
- Functions/variables: camelCase
- Constants: UPPER_SNAKE_CASE
- Files: kebab-case (except components)
- Max ~200 lines per file
- No `any` type
- No `console.log` in production code

## Prohibited

- Do NOT implement features not in specs
- Do NOT modify core definitions without ADR
- Do NOT submit PRs without tests
- Do NOT swallow errors

## Pre-Code Gate (3-gate enforcement)

コードを1行でも書く前に Gate A/B/C を確認する。
状態は .framework/gates.json で管理。

- Gate A: 開発環境（package.json, node_modules, .env, docker-compose等）
- Gate B: 計画（.framework/plan.json にwave分類済み、GitHub Issues作成済み）
- Gate C: SSOT完全性（機能仕様書に §3-E/F/G/H が記入済み）

全Gate passed でなければ src/ 以下の編集は .claude/hooks/pre-code-gate.sh でブロックされる。

## Workflow Orchestration

このプロジェクトには4つの専門スキルが .claude/skills/ に配置されている。
各スキルには専門エージェントが定義されており、品質の高い成果物を生成する。

### スキル起動ルール

**明示的なフェーズ指示**（以下のキーワード）→ 即座に Skill ツールで対応スキルを起動:

| キーワード | 起動スキル |
|-----------|-----------|
| 「ディスカバリー」「何を作りたい？」「アイデア」 | /discovery |
| 「設計」「仕様を作って」「スペック」「アーキテクチャ」 | /design |
| 「実装開始」「コードを書いて」「タスク分解」 | /implement |
| 「レビュー」「監査」「audit」 | /review |

**タスク指示**（「DEV-XXXを実装して」「〇〇機能を作って」等）→ 適切なスキルの起動を提案:
- 新機能の場合: 「/design で設計してから /implement で実装しますか？」
- 既存機能の修正: 「/implement で実装しますか？」
- 品質確認: 「/review で監査しますか？」
ユーザーが承認したら Skill ツールで起動。不要と判断されたらスキップ。

**軽微な作業**（typo修正、設定変更、1ファイルの小修正等）→ スキル不要。直接作業。

### フェーズ遷移
各スキル完了後、次のフェーズを提案する:
discovery → design → implement → review
ユーザー承認後に次スキルを Skill ツールで起動。

### Pre-Code Gate 連携
「実装開始」の場合:
1. Skill ツールで /implement を起動
2. /implement スキル内で .framework/gates.json を確認
3. 全Gate passed なら実装開始。未通過なら報告。

## Knowledge & Memory

### セッション開始時に参照
- .claude/memory/ — ADR（設計判断記録）、バグ教訓、改善記録
- docs/standards/KNOWLEDGE_DIGEST.md — フレームワーク知識のダイジェスト

### 実装中に参照
- 設計判断で迷った時 → .claude/memory/ の過去ADRを確認
- 同じバグを繰り返さないために → .claude/memory/ のバグ教訓を確認
- フレームワークの規約を確認 → docs/standards/KNOWLEDGE_DIGEST.md
---CLAUDE.md ここまで---

■ Step 5: プレースホルダードキュメント作成
以下のファイルを空で作成:
docs/idea/IDEA_CANVAS.md
docs/idea/USER_PERSONA.md
docs/idea/COMPETITOR_ANALYSIS.md
docs/idea/VALUE_PROPOSITION.md
docs/requirements/SSOT-0_PRD.md
docs/requirements/SSOT-1_FEATURE_CATALOG.md
docs/design/core/SSOT-2_UI_STATE.md
docs/design/core/SSOT-3_API_CONTRACT.md
docs/design/core/SSOT-4_DATA_MODEL.md
docs/design/core/SSOT-5_CROSS_CUTTING.md

■ Step 6: フレームワーク状態を初期化
以下の内容で .framework/project.json を作成:
{
  "profileType": "app",
  "createdAt": "{{TODAY}}",
  "frameworkVersion": "4.0"
}

以下の内容で .framework/gates.json を作成:
{
  "gateA": { "status": "pending", "checks": [] },
  "gateB": { "status": "pending", "checks": [] },
  "gateC": { "status": "pending", "checks": [] },
  "updatedAt": "{{TODAY}}"
}

■ Step 7: Pre-Code Gate フックをインストール
以下の内容で .claude/hooks/pre-code-gate.sh を作成（実行権限を付与すること）:

---pre-code-gate.sh ここから---
#!/bin/bash
# Pre-Code Gate hook for Claude Code (PreToolUse)
# Reads .framework/gates.json and blocks source code edits when gates have not passed.
# Exit 2 = deny (Claude Code convention), Exit 0 = allow

input=$(cat)
tool=$(echo "$input" | node -e "let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{try{console.log(JSON.parse(d).tool_name||'')}catch{console.log('')}})")

project_dir="${CLAUDE_PROJECT_DIR:-.}"

# Extract file path based on tool type
file_path=""
if [ "$tool" = "Edit" ] || [ "$tool" = "Write" ]; then
  file_path=$(echo "$input" | node -e "let d='';process.stdin.on('data',c=>d+=c);process.stdin.on('end',()=>{try{console.log(JSON.parse(d).tool_input.file_path||'')}catch{console.log('')}})")
fi

# No file path = not a file edit, allow
if [ -z "$file_path" ]; then
  exit 0
fi

# Make path relative to project dir
rel_path="${file_path#$project_dir/}"

# Check if path is a protected source code path
case "$rel_path" in
  src/*|app/*|server/*|lib/*|components/*|pages/*|composables/*|utils/*|stores/*|plugins/*)
    ;;
  *)
    exit 0
    ;;
esac

# Check .framework/gates.json
gates_file="$project_dir/.framework/gates.json"
if [ ! -f "$gates_file" ]; then
  echo "[Pre-Code Gate] .framework/gates.json not found. Run 'framework gate check'." >&2
  exit 2
fi

result=$(node -e "
  const fs = require('fs');
  try {
    const g = JSON.parse(fs.readFileSync('$gates_file', 'utf8'));
    const a = g.gateA && g.gateA.status || 'pending';
    const b = g.gateB && g.gateB.status || 'pending';
    const c = g.gateC && g.gateC.status || 'pending';
    if (a === 'passed' && b === 'passed' && c === 'passed') {
      console.log('PASSED');
    } else {
      console.log(a + ',' + b + ',' + c);
    }
  } catch(e) { console.log('error'); }
")

if [ "$result" = "PASSED" ]; then
  exit 0
fi

IFS=',' read -r gate_a gate_b gate_c <<< "$result"

echo "" >&2
echo "=====================================" >&2
echo "  PRE-CODE GATE: EDIT BLOCKED" >&2
echo "=====================================" >&2
echo "  Gate A (Environment): ${gate_a:-error}" >&2
echo "  Gate B (Planning):    ${gate_b:-error}" >&2
echo "  Gate C (SSOT):        ${gate_c:-error}" >&2
echo "" >&2
echo "  Run: framework gate check" >&2
echo "=====================================" >&2
exit 2
---pre-code-gate.sh ここまで---

■ Step 8: Claude Code 設定にフックを登録
以下の内容で .claude/settings.json を作成:
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash \"$CLAUDE_PROJECT_DIR/.claude/hooks/pre-code-gate.sh\"",
            "statusMessage": "Pre-Code Gate check..."
          }
        ]
      }
    ]
  }
}

■ Step 9: スキルテンプレートをコピー
/tmp/ai-dev-framework/templates/skills/ から以下の4ディレクトリを .claude/skills/ にコピー:
- discovery/SKILL.md（Discovery & Business Phase: D1-D4, B1-B4）
- design/SKILL.md（Product & Technical Design: P1-P5, T1-T5）
- implement/SKILL.md（Implementation Phase: I1-I5）
- review/SKILL.md（Review & Audit: R1-R5 + 合議プロトコル）

また /tmp/ai-dev-framework/.claude/skills/_INDEX.md を .claude/skills/_INDEX.md にコピー。

■ Step 10: Agent Teams テンプレートを作成
.claude/agents/ に以下の3ファイルを作成:

visual-tester.md:
「ビジュアルテストを実行するエージェント。スクリーンショットを撮影し、UIの変更点を検証する。」

code-reviewer.md:
「Adversarial Code Review エージェント。実装コードを仕様書と照合し、乖離・バグ・セキュリティホールを検出する。」

ssot-explorer.md:
「SSOT検索エージェント。仕様書群から特定の情報を検索・要約する。」

■ Step 11: .gitignore と README.md を作成
.gitignore にはnode_modules, .env, dist, .DS_Store, backups/ 等の標準的な内容を記載。
README.md にはプロジェクト名と概要を記載。

■ Step 12: GitHub テンプレートをインストール
以下のファイルをフレームワークの templates/github/ と templates/ci/ からコピー:

.github/workflows/ci.yml ← プロファイル別CIワークフロー（templates/ci/{profile}.yml）
.github/PULL_REQUEST_TEMPLATE.md ← SSOT準拠チェックリスト付きPRテンプレート
.github/ISSUE_TEMPLATE/feature-db.md ← DB実装タスクテンプレート
.github/ISSUE_TEMPLATE/feature-api.md ← API実装タスクテンプレート
.github/ISSUE_TEMPLATE/feature-ui.md ← UI実装タスクテンプレート
.github/ISSUE_TEMPLATE/feature-test.md ← テストタスクテンプレート
.github/ISSUE_TEMPLATE/bug.md ← バグ報告テンプレート
.github/CODEOWNERS ← コードオーナー定義

ci.yml 内の {{PROJECT_NAME}} はプロジェクト名に置換する。

■ Step 13: クリーンアップ
rm -rf /tmp/ai-dev-framework

■ Step 14: ディスカバリー開始
セットアップ完了を報告してから、ディスカバリーフローを開始して。

ディスカバリーのルール:
- 1回の発言で1つだけ質問する（まとめて聞かない）
- 具体例を添えて、気軽に答えられるようにする
- 各ステージ完了時に整理・確認する
- まとまっていなくてOK

ディスカバリーのステージ:
Stage 1: ビジョン（何を作りたい？誰のため？）
Stage 2: ユーザー（ターゲットは？課題は？）
Stage 3: 機能（必要な機能は？MVP は？）
Stage 4: ビジネス（収益モデルは？競合は？）
Stage 5: 技術（技術スタックの希望は？制約は？）

ディスカバリー完了後、回答をもとに以下を生成:
1. IDEA_CANVAS.md
2. USER_PERSONA.md
3. COMPETITOR_ANALYSIS.md
4. VALUE_PROPOSITION.md
5. SSOT-0_PRD.md（初版）

各ドキュメントは1つずつ生成して、都度ユーザーの確認を挟むこと。
テンプレートは docs/standards/idea/ にあるので参照すること。

まず「どんなサービスを作りたいですか？」から始めて。
